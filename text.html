<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encrypted Markdown Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
    <style>
        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f1ea;
        }
        h1, h2, h3 {
            font-family: 'Palatino', 'Palatino Linotype', serif;
        }
        #decryption-form {
            margin-bottom: 20px;
        }
        input, select {
            padding: 5px;
            font-size: 16px;
            margin-right: 10px;
        }
        button {
            padding: 5px 10px;
            font-size: 16px;
            background-color: #4a4a4a;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #333;
        }
        #content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <h1>Encrypted Markdown Viewer</h1>
    <div id="decryption-form">
        <input type="password" id="password" placeholder="Enter password">
        <select id="key-size">
            <option value="128">128-bit</option>
            <option value="192">192-bit</option>
            <option value="256">256-bit</option>
        </select>
        <button id="decrypt-button">Decrypt</button>
    </div>
    <div id="content"></div>

    <script>
        // Replace this with your actual encrypted text
        const encryptedText = "VKzRTXzIKbjzevDeXH8ZBKUC+8HumHcqGWmBt1Fxrwk="; // Your encrypted text goes here

        document.getElementById('decrypt-button').addEventListener('click', function() {
            const password = document.getElementById('password').value;
            const keySize = parseInt(document.getElementById('key-size').value);
            
            try {
                let decrypted;
                // Try different decryption methods
                try {
                    // Method 1: Direct decryption (for some online tools)
                    decrypted = CryptoJS.AES.decrypt(encryptedText, password).toString(CryptoJS.enc.Utf8);
                } catch (e) {
                    // Method 2: Using key derivation (for other tools)
                    const salt = CryptoJS.enc.Hex.parse(encryptedText.substr(0, 32));
                    const ciphertext = encryptedText.substring(32);
                    const key = CryptoJS.PBKDF2(password, salt, { keySize: keySize/32, iterations: 1000 });
                    const decryptedWA = CryptoJS.AES.decrypt(ciphertext, key, { iv: salt });
                    decrypted = decryptedWA.toString(CryptoJS.enc.Utf8);
                }

                if (decrypted) {
                    const renderedMarkdown = marked.parse(decrypted);
                    document.getElementById('content').innerHTML = renderedMarkdown;
                } else {
                    throw new Error('Decryption failed');
                }
            } catch (error) {
                alert('Incorrect password or decryption error. Please check your password and encryption settings.');
                console.error(error);
            }
        });
    </script>
</body>
</html>
